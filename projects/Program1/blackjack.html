<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Blackjack by Julian Viso</TITLE>
	<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    	<meta name="viewport" content="width=device-width, initial-scale=1">
    	<meta name="author" content="Julian Viso">
    	<meta name="MobileOptimized">
	<link href="../../bootstrap-3.3.2-dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="../../font-awesome-4.0.3/css/font-awesome.min.css" rel="stylesheet">
    	<!--<link href="css/main.css" rel="stylesheet"> -->
	<link id="swapper" rel="stylesheet" type="text/css" href="../../css/main.css" />
	<!-- end .features --> 
    
    <script type="text/javascript">
    		if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
      		var msViewportStyle = document.createElement('style')
      		msViewportStyle.appendChild(document.createTextNode(
      		'@-ms-viewport{width:auto!important}'))
     		document.querySelector('head').appendChild(msViewportStyle)
    		}
  	</script>
	<!--<script src="javascript/cookie.js/cookie.min.js"></script> -->
	<script type="text/javascript">
		var i=1;
		function styleSheet(){
			if(i%2==0){
				swapper('../../css/main.css');	
				storeStyleSheet("primary","main.css");
			}
			else{
				swapper('../../css/stylesheetalternate.css');
				storeStyleSheet("alternate","stylesheetalternate.css");
			}
			i++;
		}
	</script>
	
	<script type="text/javascript">
		function storeStyleSheet(styleSheetKey, styleSheetName){
			localStorage.setItem(styleSheetKey, styleSheetName);
		}
	</script>
	
	<script src="javascript/code.jquery.com:jquery-2.1.1.min.js"></script>
	<script>
		$(document).ready(function(){
			setStoredStyleSheet(styleSheetKey);
		});
		$(document).ready(function(){
			console.log("test");
		});
	</script>
		
		
	<SCRIPT LANGUAGE="JavaScript">
/* 
CS316 program 1
Author: Julian Viso
Date: 9/2014

Example code to start Program 1
*/
//****************************** GLOBAL VARIABLES ***********************************************
// DSIZE is size of deck: 52 for normal deck
// Note: do not hardcode deck size. Use this variable
// to simplify my (and your) testing
var DSIZE = 52; // size of deck
var card = new Array(DSIZE); // shuffled deck
var cardstart = new Array(DSIZE); // starting deck in order
var cc; // index into card array during play
var dealpressed;    // deal button has been pressed
var resetPressed; //reset button has been pressed
var useCheckboxes;
var hitCheckboxes;
var doubleBetCheckboxes;	
		
var playerScore; //card values each round
var playerResult; // win/loss
var playerStake; //total stake
var playerBet;
var dealerScore; //card values each round

var dcard1; //dealer and player cards
var pcard1;
var dcard2;
var pcard2;

		
var mycards;
var dlcards;
		
		
		
// Put other global variables here ***********************************************************************************************
newdeal();   // start with new deal
// newdeal
// This is one way to create a shuffled deck
// reshuffle the cards, put in card array
// Preconditions:
//	New Deal button pressed
// Postconditions:
//	Card array filled and shuffled
function newdeal() {  
	// cardstart is unshuffled 1,2,3....
	// card 1 is ace of clubs (1.png)
	// card 2 is ace of spades (2.png)
    // card 52 is 2 of diamonds (52.png)
    // create array of numbers 1 to 52
	for (var i = 0; i < DSIZE;i++) {
		cardstart[i] = i;    
	}
	// select card randomly from cardstart and put in card
	var randcard; // randomly selected card 
	for (var j = 0; j < DSIZE; j++) {
		randcard = Math.round(Math.random() * (DSIZE - j - 1)); // choose card
		card[j] = cardstart[randcard]; // store random card
		cardstart.splice(randcard, 1); // pack array
	}  
	cc = 0;              // index into card array
}

// resetdata
// reset all variables, screen fields to start fresh

function resetdata() {	
	resetPressed = 1; //reset button has been pressed
	document.JForm.opscore.value = 0;
    	document.JForm.myscore.value = 0;
	document.JForm.myresult.value = 0;
	document.JForm.mystake.value = 0;
	document.getElementById("dlcards").innerHTML =null; 
    	document.getElementById("mycards").innerHTML =null;
	cardstart[i] = 0;
	cc = 0;
	useCheckboxes = 0;
	doubleBetCheckboxes = 0;
	hitCheckboxes = 0;
	document.getElementById("ckbox").checked = false;
	document.getElementById("mydouble").checked = false;
	document.getElementById("myhit").checked = false;
	playerScore = 0;
	dealerScore = 0;
}

// calculate
// calculate value of card
// Preconditions:
//	Card passed
//	1 <= card <= 52
// Postconditions:
//	Card value returned
function calculate(card) {
var value; // numerical value of card
	if (card <= 4){    // ace
		if (playerScore < 11)
		{
			value = 11;
			return value; 
		}
		else{
			value = 1;
			return value;
		}
		if (dealerScore < 11)
		{
			value = 11;
			return value;
		}
		else{
			value = 1;
			return value;
		}
	}
	if (card <= 20) {   // face card or 10
		value = 10;
		return value;
	}
	if (card <= 24) {  // 9, and so forth
		value = 9;
		return value;
	}    
	if (card <= 28) {
		value = 8;
		return value;
	}      
	if (card <= 32) {
		value = 7;
		return value;
	}    
	if (card <= 36) {
		value = 6;
		return value;
	}    
	if (card <= 40) {
		value = 5;
		return value;
	}    
	if (card <= 44) {
		value = 4;
		return value;
	}    
	if (card <= 48){        
		value = 3;
		return value;
	}   
	value = 2;          // only 2 left
	return value; 
}

  // getcard
  // get card from cardstart, then remove from deck
  function getcard() {
    var card;
    // One way to do this:
    // Get a random number from 1 to size of
    // remaining deck - cards in cardstart 
    // See Math.random function
    // return that card
    // Delete card from cardstart array by using the
    // slice function on arrays: 
    // Get the array in front of the selected card
    // Get the array after the card
    // Put the two slices together and replace
    // cardstart with it
		 
	
    return card;
  }

 // run100
  // run 1000 times
  function run1000() {
    var i;
    //alert("Run 1000 pressed");  // delete when run1000 coded
    for (i=0;i < 1000; i++) {
 
		newdeal();   // start with shuffled deck
      
		deal();           // then deal 
   
        run();            // then run
    }
		
    //alert("Run 1000 done");  // delete when run1000 coded
    // when done, update the screen
 
  }
 
  // hit
  // Determine whether to take one more card
  // Preconditions:
  //    m1 value of my first card
  //    m2 value of my second card
  //    d1 value of dealer first card
  //    d2 value of dealer second card
  // Postconditions:
  //    returns true: take another card
  //            false: do not take card
  //    For the input cards (m1,m2,d1,d2):
  //    ace  11
  //    face card 10
  //    all others their value 
function hit(m1,m2,d1,d2) {
	if (m1 + m2 == 21){ //don't take card if already at 21
		return false;  
	}
	if (d1 + d2 >= 17){ //dealer automatically takes a card if at 17 or lower score
		return false;	
	}
	if (m1 + m2 < d1 + d2){
		return true;	
	}
		
  }

//function to take a third card based on whether or not the hit function returns true/false. Note: the final parameter 'who' is to determine whether the card is to be given to the player or the dealer. 
function takeCard(m1,m2,d1,d2, who){
		//Gives card to player
		if(who){
		mycard3number = card[cc++];
		playerScore += calculate(mycard3number);
		var mycard3 = "<img src = '"+mycard3number+".png' />";
		document.getElementById("mycards").innerHTML += mycard3;
		if (playerScore > 21){ //automatically checks to see if the new score is over 21 and sets the round's score to BUST if true.
			document.JForm.myscore.value = "BUST";
			return "BUST";
		}
		document.JForm.myscore.value = playerScore;
		return playerScore;
	}
	//Gives card to the dealer	
	if (!who){
		dlcard3number = card[cc++];
		dealerScore += calculate(dlcard3number);
		var dlcard3 = "<img src = '"+dlcard3number+".png' />";
		dlcards += dlcard3;
		document.getElementById("dlcards").innerHTML =dlcards;
		document.JForm.opscore.value = dealerScore;
		if (dealerScore > 21){ //automatically checks to see if the new score is over 21 and sets the round's score to BUST if true.
			document.JForm.opscore.value = "BUST";
			return "BUST";
		}
		return dealerScore;
	}	
}
					
					
  function doublebet(m1,m2,d1,d2) {
// determine whether to double the bet
// Preconditions:
//    m1 value of my first card
//    m2 value of my second card
//    d1 value of dealer first card
//    d2 value of dealer second card
// Postconditions:
//    returns 200 if bet doubled
//            100 if not
	//if player has a greater score than dealer then bet is set to 200	
	var myBet;	
	if (m1 + m2 > d1 + d2){
		myBet = 200;
	}
	else{
		myBet = 100;
	}
	return myBet;
}



// run
// after deal, determine whether to take card or double bet
// Preconditions:
//	Deal button pressed
// Postconditions:
//	Game completed
//	Results displayed 
function run() {
	//alert("Run pressed");  // replace with actual code for run
	var stakeScore = parseInt (document.JForm.mystake.value)
	var winLossScore = parseInt (document.JForm.myresult.value)
	if(	dealpressed == 1){ //sets deal to 0 after run is used so player must hit deal for next round of the game.
		dealpressed = 0;
		if (useCheckboxes == 1){
		if ( document.getElementById("myhit").checked){ //checks that myhit is clicked.
			playerScore = takeCard(pcard1, pcard2, dcard1, dcard2, true);
		}
		if(dealerScore < 17 && playerScore != "BUST"){
			dealerScore = takeCard(pcard1, pcard2, dcard1, dcard2, false);
		}
		//Player wins
		if ((dealerScore < playerScore && playerScore != "BUST") || dealerScore == 'BUST'){
			if (doubleBetCheckboxes == 1){
				document.JForm.myresult.value = winLossScore + 200;
				document.JForm.mystake.value = 200;
			}
			else{
				document.JForm.myresult.value = winLossScore + 100;
				document.JForm.mystake.value = 100;
			}
		}
		else if (dealerScore < playerScore && playerScore == 21){
			if (doubleBetCheckboxes == 1){
				document.JForm.myresult.value = winLossScore + 200;
				document.JForm.mystake.value = 200;
			}
			else{
				document.JForm.myresult.value = winLossScore +100;
				document.JForm.mystake.value = 100;
			}
		}
		
		//Tie game
		if (dealerScore == playerScore){
			document.JForm.myresult.value = WinlossScore + 0;
		}
		
		//Dealer wins
		if ((playerScore < dealerScore && dealerScore != 'BUST') || playerScore == 'BUST'){
			if (doubleBetCheckboxes == 1){
				document.JForm.myresult.value = winLossScore -200;
				document.JForm.mystake.value = 200;
			}
			else{
				document.JForm.myresult.value = winLossScore -100;
				document.JForm.mystake.value = 100;
			}
			}	
		}
		//Without checkboxes clicked
	else{
		//alert("test")
		playerBet = doubleBet(pcard1, pcard2, dcard1, dcard2);
		alert(playerBet);
		hit(pcard1, pcard2, dcard1, dcard2);
		if (playerScore < dealerScore){
			playerScore = takeCard(pcard1, pcard2, dcard1, dcard2, true);
		}
		if(dealerScore < 17 && playerScore != "BUST"){
				dealerScore = takeCard(pcard1, pcard2, dcard1, dcard2, false);
			}
		//Player wins
		if ((dealerScore < playerScore && playerScore != "BUST") || dealerScore == 'BUST'){
			if (playerBet == 200){
				document.JForm.myresult.value = winLossScore + 200;
				document.JForm.mystake.value = 200;
			}
			else{
				document.JForm.myresult.value = winLossScore + 100;
				document.JForm.mystake.value = 100;
			}
		}
		else if (dealerScore < playerScore && playerScore == 21){
			if (playerBet == 200){
				document.JForm.myresult.value = winLossScore + 200;
				document.JForm.mystake.value = 200;
			}
			else{
				document.JForm.myresult.value = winLossScore +100;
				document.JForm.mystake.value = 100;
			}
		}
		
		//Tie game
		if (dealerScore == playerScore){
			document.JForm.myresult.value = WinlossScore + 0;
		}
		
		//Dealer wins
		if ((playerScore < dealerScore && dealerScore != 'BUST') || playerScore == 'BUST'){
			if (playerBet == 100){
				document.JForm.myresult.value = winLossScore -200;
				document.JForm.mystake.value = 200;
			}
			else{
				document.JForm.myresult.value = winLossScore -100;
				document.JForm.mystake.value = 100;
			}
		}		
	}
	}
	//for when deal hasn't been pressed send an alert
	else{
		alert("Deal hasn't been pressed yet");
		}
}
				
		
// deal
// start by dealing 2 cards to opponent and you
function deal() {
	// deal cards and display data
	dealpressed = 1; // deal button has been pressed
	// draw two cards for each player
	dlcard1number = card[cc++];
	dlcard2number = card[cc++];
	mycard1number = card[cc++];
	mycard2number = card[cc++];
		
	//Values for player and dealer cards	
	dcard1 = calculate(dlcard1number);
	pcard1 = calculate (mycard1number);
	dcard2 = calculate (dlcard2number);
	pcard2 = calculate (mycard2number);
	//Scores per round for both the player and dealer	
	dealerScore = calculate(dlcard1number) + calculate(dlcard2number);
	playerScore = calculate(mycard1number) + calculate(mycard2number);
	var dlcard1 = "<img src = '"+dlcard1number+".png' />";  
	var dlcard2 = "<img src = '"+dlcard2number+".png' />";
	dlcards = dlcard1 + dlcard2;
	mycard1 = "<img src = '"+mycard1number+".png' />";  
	mycard2 = "<img src = '"+mycard2number+".png' />";
	mycards = mycard1 + mycard2;
    	// Example how to display on screen in textboxes
    	document.JForm.opscore.value = calculate(dlcard1number) + calculate(dlcard2number);
    	document.JForm.myscore.value = calculate(mycard1number) + calculate(mycard2number);
	if (calculate(dlcard1number) + calculate(dlcard2number) > 21)
		document.JForm.opscore.value = "BUST"
	if (calculate(mycard1number) + calculate(mycard2number) > 21)
		document.JForm.myscore.value = "BUST"
	if (calculate(dlcard1number) + calculate(dlcard2number) > 22)
		document.JForm.mystake.value = 100;
	if (calculate(mycard1number) + calculate(mycard2number) == 21)
		document.JForm.mystake.value = 100;
	document.JForm.mystake.value = 100; //Sets the default stake on screen to be 100.
    	// Display cards on screen
    	document.getElementById("dlcards").innerHTML =dlcards; 
    	document.getElementById("mycards").innerHTML =mycards;
	
}
					
function useCheckBoxes(){
	useCheckboxes =1; //checkboxes have been pressed. 
}

function hitCheckboxes(){
	hitCheckboxes=1; //hit checkbox has been pressed				
}

function doubleBetCheckboxes(){
	doubleBetCheckboxes = 1; //double bet has been checked
}					
</SCRIPT>

</HEAD>
<BODY >
	
	<div class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
					<span class="sr-only">Toggle Nav</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span> 
				 </button>
				 <a class="navbar-brand" href="/index.html">Julian Viso</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="/about/">About</a></li>
					<li><a href="/projects/">Projects</a></li>
					<li class="active"><a href="/blog/">Blog</a></li>
					<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contact <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="https://github.com/julianviso"><i class="fa fa-github fa-lg"> Github</i></a></li>
							<li><a href="https://twitter.com/VisoJulian"><i class="fa fa-twitter fa-lg"> Twitter</i></a></li>
							<li><a href="mailto:julian.viso@outlook.com"><i class="fa fa-envelope fa-lg"> Email</i></a></li>
						</ul>
					</li>
				</ul>
			</div>  
		</div>
	</div>
	
	<div class="megaSpacer"></div>
	
	
<FORM NAME="JForm">
	<CENTER>
		<TABLE CELLPADDING=2 CELLSPACING=2 STYLE="page-break-before: always">
			<TR>
				<TH STYLE="border: none; padding: 0in">
					<P>New deal</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=BUTTON VALUE="New Deal" STYLE="width: 1.08in; height: 0.4in" ONCLICK="newdeal();">
										</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P>Reset</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=BUTTON VALUE="Reset" STYLE="width: 0.75in; height: 0.4in" ONCLICK="resetdata();">
										</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P>Use checkboxes: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=CHECKBOX NAME="ckbox" ID="ckbox"STYLE="width: 0.14in; height: 0.14in" VALUE ="0" ONCLICK="useCheckBoxes();">
										</P>
				</TH>
			</TR>
			<TR>


				<TH STYLE="border: none; padding: 0in">
					<P>My hit: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=CHECKBOX NAME="myhit" ID="myhit" STYLE="width: 0.14in; height: 0.14in" ONCLICK="hitCheckBoxes();">
										</P>
				</TH>
				<TD COLSPAN=2 VALIGN=TOP STYLE="border: none; padding: 0in"></TD>
			
		

				<TH STYLE="border: none; padding: 0in">
					<P>My double bet: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=CHECKBOX NAME="mydouble" ID="mydouble" STYLE="width: 0.14in; height: 0.14in" ONCLICK="doubleBetCheckboxes();">
										</P>
				</TH>
				<TD COLSPAN=2 VALIGN=TOP STYLE="border: none; padding: 0in"></TD>
			</tr>
			<TR>
				<TH STYLE="border: none; padding: 0in">
					<P>Dealer score: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=TEXT NAME="opscore" VALUE="0" SIZE=5 STYLE="width: 0.51in; height: 0.31in">
										</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P>My score: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=TEXT NAME="myscore" VALUE="0" SIZE=5 STYLE="width: 0.51in; height: 0.31in">
										</P>
				</TH>
				<TD COLSPAN=2 VALIGN=TOP STYLE="border: none; padding: 0in"></TD>
			</TR>
			<TR>

				<TH STYLE="border: none; padding: 0in">
					<P>My win/loss: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=TEXT NAME="myresult" VALUE="0" SIZE=5 STYLE="width: 0.51in; height: 0.31in">
										</P>
				</TH>
				<TD COLSPAN=2 VALIGN=TOP STYLE="border: none; padding: 0in"></TD>
		

				<TH STYLE="border: none; padding: 0in">
					<P>My total stake: 
					</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=TEXT NAME="mystake" VALUE="0" SIZE=5 STYLE="width: 0.51in; height: 0.31in">
										</P>
				</TH>
				<TH STYLE="border: none; padding: 0in"></TH>
				<TD VALIGN=TOP STYLE="border: none; padding: 0in"></TD>
			</TR>
			<TR>
				<TH STYLE="border: none; padding: 0in">
					<P>Deal</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=BUTTON VALUE="Deal" STYLE="width: 0.64in; height: 0.4in" ONCLICK="deal();">
										</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P>Run once</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=BUTTON VALUE="Run" STYLE="width: 0.59in; height: 0.4in" ONCLICK="run();">
										</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P>Run 1000 times</P>
				</TH>
				<TH STYLE="border: none; padding: 0in">
					<P><INPUT TYPE=BUTTON VALUE="Run" STYLE="width: 0.59in; height: 0.4in" ONCLICK="run1000();">
										</P>
				</TH>
			</TR>
		</TABLE>
	</CENTER>
</FORM>
<H2 ALIGN=CENTER>Dealer's Cards</H2>
<DIV ID="dlcards" ALIGN=CENTER> 
	<H2  ALIGN=CENTER></H2>
</DIV>
<H2  ALIGN=CENTER> My Cards</H2>
<DIV ID="mycards" ALIGN=CENTER >
	<H2 CLASS="western" ALIGN=CENTER></H2>
</DIV>
<script src="../../bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>
</BODY>
</HTML>
